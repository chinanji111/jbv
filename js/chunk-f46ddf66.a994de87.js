(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f46ddf66","chunk-2d0c06ae"],{4260:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("a-card",{staticStyle:{"margin-bottom":"10px"}},[a("p",{attrs:{slot:"title"},slot:"title"},[a("span",[t._v("流程审批进度历史")])]),a("a-row",{staticStyle:{position:"relative"}},[a("a-table",{ref:"table",attrs:{loading:t.loading,rowKey:"id",dataSource:t.data,pagination:!1}},[a("a-table-column",{attrs:{title:"#",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e,n,i){return[a("span",[t._v(" "+t._s(i+1)+" ")])]}}])}),a("a-table-column",{attrs:{title:"任务名称",dataIndex:"name",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(" "+t._s(e)+" ")])]}}])}),a("a-table-column",{attrs:{title:"处理人",dataIndex:"assignees",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e?a("div",t._l(e,(function(e){return a("span",[e.isExecutor?a("span",{staticStyle:{color:"#00DB00"}},[t._v(t._s(e.username)+" ")]):a("span",{staticStyle:{color:"#999"}},[t._v(t._s(e.username)+" ")])])})),0):t._e()]}}])}),a("a-table-column",{attrs:{title:"审批操作",dataIndex:"deleteReason",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.toString().indexOf("通过")>-1?a("span",{staticStyle:{color:"#00DB00"}},[t._v(t._s(e))]):e.toString().indexOf("驳回")>-1?a("span",{staticStyle:{color:"red"}},[t._v(t._s(e))]):a("span",[t._v(t._s(e))])]}}])}),a("a-table-column",{attrs:{title:"审批意见",dataIndex:"comment",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e))])]}}])}),a("a-table-column",{attrs:{title:"耗时",dataIndex:"duration",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.millsToTime(e)))])]}}])}),a("a-table-column",{attrs:{title:"创建时间",dataIndex:"createTime",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e))])]}}])}),a("a-table-column",{attrs:{title:"完成时间",dataIndex:"endTime",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e))])]}}])}),a("a-table-column",{key:"aaa",attrs:{title:"状态",dataIndex:"endTime",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e?a("span",{staticStyle:{color:"blue"}},[t._v("已办理")]):a("span",{staticStyle:{color:"#999999"}},[t._v("待处理")])]}}])})],1)],1)],1),a("a-tabs",{attrs:{type:"card"},on:{change:t.callback}},[a("a-tab-pane",{key:"1",attrs:{tab:"实时流程图"}},[a("a-card",[a("a-row",{staticStyle:{position:"relative"}},[a("img",{attrs:{src:t.imgUrl}}),t.loadingImg?a("a-spin",{attrs:{size:"large",fix:""}}):t._e()],1)],1)],1),t.lcModa?a("a-tab-pane",{key:"2",attrs:{tab:"表单数据"}},[a("a-card",[a(t.lcModa.formComponent,{tag:"component",attrs:{disabled:t.lcModa.disabled,processData:t.lcModa.processData,isNew:t.lcModa.isNew,task:t.lcModa.isTask},on:{afterSubmit:t.afterSub,passTask:function(e){return t.pass(t.lcModa.processData)},backTask:function(e){return t.back(t.lcModa.processData)},close:function(e){t.lcModa.visible=!1,t.lcModa.disabled=!1}}})],1)],1):t._e()],1)],1)},i=[],s=a("b65a"),o=a("9ab6"),r={name:"historic_detail",mixins:[o["a"],s["a"]],props:{procInstId:{type:String,default:"",required:!0},lcModa:{type:Object,required:!1}},data:function(){return{url:{historicFlow:"/actTask/historicFlow/",getHighlightImg:"".concat(window._CONFIG["domianURL"],"/activiti/models/getHighlightImg/")},type:0,loading:!1,loadingImg:!1,data:[],id:"",imgUrl:"",backRoute:""}},created:function(){this.init()},watch:{procInstId:function(t,e){this.init()}},methods:{loadData:function(){},init:function(){this.id=this.procInstId,this.imgUrl=this.url.getHighlightImg+this.id+"?time="+new Date,this.getDataList()},getDataList:function(){var t=this;this.loading=!0,this.getAction(this.url.historicFlow+this.id).then((function(e){t.loading=!1,e.success?(t.data=e.result,e.result&&0!=e.result.length||t.$message.info("未找到该记录审批历史数据,历史数据可能已被删除")):t.$message.error(e.message)}))},handleTableChange:function(t,e,a){Object.keys(a).length>0&&(this.isorter.column=a.field,this.isorter.order="ascend"==a.order?"asc":"desc"),this.ipagination=t},callback:function(t){},afterSub:function(){},pass:function(t){this.$emit("passTask",t)},back:function(t){this.$emit("backTask",t)}}},c=r,l=a("2877"),d=Object(l["a"])(c,n,i,!1,null,null,null);e["default"]=d.exports},"9ab6":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("ca00"),a("0fea");var n=a("2b0e"),i=a("9fb0"),s=a("d579"),o={components:{JEllipsis:s["default"]},data:function(){return{tokenHeader:{"X-Access-Token":n["default"].ls.get(i["a"])}}},computed:{allFormComponent:function(){return[{text:"示例表单",routeName:"@/views/activiti/form/demoForm",component:function(){return a.e("chunk-71797d8a").then(a.bind(null,"c4c0"))},businessTable:"test_demo"}]},historicDetail:function(){return function(){return a.e("chunk-2d0c06ae").then(a.bind(null,"4260"))}}},methods:{getFormComponent:function(t){return _.find(this.allFormComponent,{routeName:t})||{}},millsToTime:function(t){if(!t)return"";var e=t/1e3;if(e<60)return e.toFixed(0)+" 秒";var a=e/60;if(a<60)return a.toFixed(0)+" 分钟";var n=a/60;if(n<24)return n.toFixed(0)+" 小时";var i=n/24;if(i<30)return i.toFixed(0)+" 天";var s=i/30;if(s<12)return s.toFixed(0)+" 个月";var o=s/12;return o.toFixed(0)+" 年"},handleTableChange:function(t,e,a){Object.keys(a).length>0&&(this.isorter.column=a.field,this.isorter.order="ascend"==a.order?"asc":"desc"),this.ipagination=t},getProcessDefByKey:function(t){var e=null,a=JSON.parse(window.sessionStorage.getItem("newestProcessList"));return a.forEach((function(a){a.processKey===t&&(e=a)})),e}}}}}]);