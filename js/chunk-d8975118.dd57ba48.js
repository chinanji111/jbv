(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8975118"],{"61f8":function(t,e,a){"use strict";var n=a("a631"),i=a.n(n);i.a},"9ab6":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));a("ca00"),a("0fea");var n=a("2b0e"),i=a("9fb0"),o=a("d579"),s={components:{JEllipsis:o["default"]},data:function(){return{tokenHeader:{"X-Access-Token":n["default"].ls.get(i["a"])}}},computed:{allFormComponent:function(){return[{text:"示例表单",routeName:"@/views/activiti/form/demoForm",component:function(){return a.e("chunk-71797d8a").then(a.bind(null,"c4c0"))},businessTable:"test_demo"}]},historicDetail:function(){return function(){return a.e("chunk-2d0c06ae").then(a.bind(null,"4260"))}}},methods:{getFormComponent:function(t){return _.find(this.allFormComponent,{routeName:t})||{}},millsToTime:function(t){if(!t)return"";var e=t/1e3;if(e<60)return e.toFixed(0)+" 秒";var a=e/60;if(a<60)return a.toFixed(0)+" 分钟";var n=a/60;if(n<24)return n.toFixed(0)+" 小时";var i=n/24;if(i<30)return i.toFixed(0)+" 天";var o=i/30;if(o<12)return o.toFixed(0)+" 个月";var s=o/12;return s.toFixed(0)+" 年"},handleTableChange:function(t,e,a){Object.keys(a).length>0&&(this.isorter.column=a.field,this.isorter.order="ascend"==a.order?"asc":"desc"),this.ipagination=t},getProcessDefByKey:function(t){var e=null,a=JSON.parse(window.sessionStorage.getItem("newestProcessList"));return a.forEach((function(a){a.processKey===t&&(e=a)})),e}}}},a631:function(t,e,a){},cd3f:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("a-card",[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch(e)}}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:6,sm:8}},[a("a-form-item",{attrs:{label:"任务名称",prop:"name"}},[a("a-input",{attrs:{type:"text",placeholder:"请输入",clearable:""},model:{value:t.searchForm.name,callback:function(e){t.$set(t.searchForm,"name",e)},expression:"searchForm.name"}})],1)],1),a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[a("a-col",{attrs:{md:6,sm:12}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:t.handleSearch}},[t._v("搜索")]),a("a-button",{staticStyle:{"margin-left":"10px"},on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1)],1)],1),a("a-row",[a("a-table",{ref:"table",attrs:{scroll:t.scroll,bordered:"",loading:t.loading,rowKey:"id",dataSource:t.data,pagination:t.ipagination},on:{change:t.handleTableChange}},[a("a-table-column",{attrs:{title:"#",width:50},scopedSlots:t._u([{key:"default",fn:function(e,n,i){return[a("span",[t._v(" "+t._s(i+1)+" ")])]}}])}),a("a-table-column",{attrs:{title:"任务名称",dataIndex:"name",width:150,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e,n,i){return[a("span",[t._v(" "+t._s(e)+" ")])]}}])}),a("a-table-column",{attrs:{title:"所属流程",dataIndex:"processName",width:150,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e,n,i){return[a("span",[t._v(" "+t._s(e)+" ")])]}}])}),a("a-table-column",{attrs:{title:"委托人",dataIndex:"owner",width:130,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e,n,i){return[a("span",[t._v(" "+t._s(e)+" ")])]}}])}),a("a-table-column",{attrs:{title:"流程发起人",dataIndex:"applyer",width:130,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e,n,i){return[a("span",[t._v(" "+t._s(e)+" ")])]}}])}),a("a-table-column",{key:"priority",attrs:{title:"优先级",dataIndex:"priority",width:100,align:"center",sorter:function(t,e){return t.priority-e.priority}},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e?a("span",{staticStyle:{color:"green"}},[t._v(" 普通 ")]):1==e?a("span",{staticStyle:{color:"orange"}},[t._v(" 重要 ")]):2==e?a("span",{staticStyle:{color:"red"}},[t._v(" 紧急 ")]):a("span",{staticStyle:{color:"#999"}},[t._v(" 无 ")])]}}])}),a("a-table-column",{attrs:{title:"审批操作",dataIndex:"deleteReason",width:100,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(" "+t._s(e)+" ")])]}}])}),a("a-table-column",{attrs:{title:"审批意见",dataIndex:"comment",width:100,align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("j-ellipsis",{attrs:{value:t,length:10}})]}}])}),a("a-table-column",{key:"duration",attrs:{title:"耗时",dataIndex:"duration",width:100,align:"center",sorter:function(t,e){return t.duration-e.duration}},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(" "+t._s(t.millsToTime(e))+" ")])]}}])}),a("a-table-column",{attrs:{title:"创建时间",dataIndex:"createTime",width:150,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(" "+t._s(e)+" ")])]}}])}),a("a-table-column",{attrs:{title:"操作",dataIndex:"action",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e,n,i){return[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.detail(n)}}},[t._v("表单数据")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.history(n)}}},[t._v("审批历史")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return t.remove(n)}}},[a("a",{staticStyle:{color:"red"}},[t._v("删除")])])]}}])})],1)],1)],1),a("a-modal",{attrs:{title:"审批历史","mask-closable":!1,width:"80%",footer:null},model:{value:t.modalLsVisible,callback:function(e){t.modalLsVisible=e},expression:"modalLsVisible"}},[t.modalLsVisible?a("div",[a(t.historicDetail,{tag:"component",attrs:{procInstId:t.procInstId}})],1):t._e()]),a("a-modal",{attrs:{title:t.lcModa.title,footer:null,maskClosable:!1,width:"80%"},model:{value:t.lcModa.visible,callback:function(e){t.$set(t.lcModa,"visible",e)},expression:"lcModa.visible"}},[t.lcModa.visible?a(t.lcModa.formComponent,{tag:"component",attrs:{disabled:t.lcModa.disabled,processData:t.lcModa.processData,isNew:t.lcModa.isNew},on:{close:function(e){t.lcModa.visible=!1,t.lcModa.disabled=!1}}}):t._e()],1)],1)},i=[],o=a("b65a"),s=a("9ab6"),r={name:"done-manage",mixins:[s["a"],o["a"]],data:function(){return{openSearch:!0,openTip:!0,loading:!0,selectCount:0,selectList:[],searchForm:{name:"",pageNumber:1,pageSize:10,sort:"createTime",order:"desc"},modalType:0,modalVisible:!1,modalTitle:"",form:{reason:""},formValidate:{},submitLoading:!1,data:[],total:0,deleteId:"",url:{doneList:"/actTask/doneList",deleteHistoricTask:"/actTask/deleteHistoric/"},modalLsVisible:!1,procInstId:"",lcModa:{title:"",disabled:!1,visible:!1,formComponent:null,isNew:!1}}},mounted:function(){this.init()},methods:{loadData:function(){},init:function(){this.getDataList()},getDataList:function(){var t=this;this.loading=!0,this.getAction(this.url.doneList,this.searchForm).then((function(e){t.loading=!1,e.success?t.data=e.result||[]:t.$message.error(e.message)}))},handleSearch:function(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},handleReset:function(){this.searchForm={},this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},handelCancel:function(){this.modalVisible=!1},detail:function(t){t.routeName||this.$message.warning("该流程信息未配置表单，请联系开发人员！")},history:function(t){t.procInstId?(this.procInstId=t.procInstId,this.modalLsVisible=!0,this.lcModa.disabled=!0,this.lcModa.title="查看流程业务信息："+t.processName,this.lcModa.formComponent=this.getFormComponent(t.routeName).component,this.lcModa.processData=t,this.lcModa.isNew=!1,this.lcModa.isTask=!0,this.lcModa.visible=!0):this.$message.error("流程实例ID不存在")},remove:function(t){var e=this;this.postFormAction(this.url.deleteHistoricTask+t.id).then((function(t){t.success?(e.$message.success("操作成功"),e.getDataList()):e.$message.error(t.message)}))},handleTableChange:function(t,e,a){Object.keys(a).length>0&&(this.isorter.column=a.field,this.isorter.order="ascend"==a.order?"asc":"desc"),this.ipagination=t}},watch:{}},l=r,c=(a("61f8"),a("2877")),d=Object(c["a"])(l,n,i,!1,null,null,null);e["default"]=d.exports}}]);